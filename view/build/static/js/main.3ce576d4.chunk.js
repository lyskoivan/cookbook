(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{10:function(e,t,n){e.exports={form:"RecipeEditor_form__ieF5k",input:"RecipeEditor_input__3Hocv",button:"RecipeEditor_button__arjtc",modal_buttons:"RecipeEditor_modal_buttons__3hJDS"}},13:function(e,t,n){e.exports={backdrop:"Modal_backdrop__pGbO0",modal:"Modal_modal__2uBEN"}},14:function(e,t,n){e.exports={date:"OldRecipeItem_date___1vmC",title:"OldRecipeItem_title__qGTGi"}},15:function(e,t,n){e.exports={version_list:"OldRecipe_version_list__3BMwi",version_list__item:"OldRecipe_version_list__item__2i-Vq"}},16:function(e,t,n){e.exports={recipes_list:"RecipesList_recipes_list__469Vk",recipes_list__item:"RecipesList_recipes_list__item__3Guhs"}},30:function(e,t,n){e.exports={button:"App_button__2p26r"}},31:function(e,t,n){e.exports=n(66)},37:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),c=n(26),r=n.n(c),o=(n(36),n(37),n(38),n(3)),s=n(4),l=n(6),p=n(5),u=n(7),d=n(2),_=n.n(d),m=n(9),h=n.n(m);h.a.defaults.baseURL="http://localhost:8000/api/";var f=function(){var e;return _.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.a.awrap(h.a.get("/recipes/"));case 3:return e=t.sent,t.abrupt("return",e.data);case 7:throw t.prev=7,t.t0=t.catch(0),new Error(t.t0);case 10:case"end":return t.stop()}}),null,null,[[0,7]])},v=function(e){var t;return _.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,_.a.awrap(h.a.post("/recipes/",{title:e.title,description:e.description}));case 3:return t=n.sent,n.abrupt("return",t.data);case 7:throw n.prev=7,n.t0=n.catch(0),new Error(n.t0);case 10:case"end":return n.stop()}}),null,null,[[0,7]])},b=function(e){var t;return _.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,_.a.awrap(h()({method:"delete",url:"/recipes/".concat(e)}));case 3:return t=n.sent,n.abrupt("return",t.data);case 7:throw n.prev=7,n.t0=n.catch(0),new Error(n.t0);case 10:case"end":return n.stop()}}),null,null,[[0,7]])},E=function(e,t){var n;return _.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,_.a.awrap(h.a.put("/recipes/".concat(e),t));case 3:return n=a.sent,a.abrupt("return",n.data);case 7:throw a.prev=7,a.t0=a.catch(0),new Error(a.t0);case 10:case"end":return a.stop()}}),null,null,[[0,7]])},R=function(e){var t;return _.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,_.a.awrap(h.a.get("/old/".concat(e)));case 3:return t=n.sent,n.abrupt("return",t.data);case 7:throw n.prev=7,n.t0=n.catch(0),new Error(n.t0);case 10:case"end":return n.stop()}}),null,null,[[0,7]])},w=n(13),y=n.n(w),g=function(e){function t(){var e,n;Object(o.a)(this,t);for(var i=arguments.length,c=new Array(i),r=0;r<i;r++)c[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(c)))).backdropRef=Object(a.createRef)(),n.handleKeyPress=function(e){"Escape"===e.code&&n.props.onClose()},n.handleBackdropClick=function(e){var t=n.backdropRef.current;t&&e.target!==t||n.props.onClose()},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyPress),window.addEventListener("mousedown",this.handleBackdropClick)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyPress),window.removeEventListener("mousedown",this.handleBackdropClick)}},{key:"render",value:function(){var e=this.props.children;return i.a.createElement("div",{className:y.a.backdrop,ref:this.backdropRef},i.a.createElement("div",{className:y.a.modal},e))}}]),t}(a.Component),O=n(27),C=n(12),k=n(28),j=n(10),N=n.n(j),S=new k.a,x=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).state={title:n.props.title,description:n.props.description},n.handleChange=function(e){n.setState(Object(C.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),n.state.title&&n.state.description?(n.props.onSave(Object(O.a)({},n.state)),S.success("\u0417\u0430\u043c\u0435\u0442\u043a\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430 \ud83c\udf89"),n.setState({title:"",description:""}),n.props.onCancel()):S.error("\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u044f \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440\u0430")},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.title,n=e.description,a=this.props.onCancel;return i.a.createElement("form",{className:N.a.form,onSubmit:this.handleSubmit},i.a.createElement("input",{className:N.a.input,type:"text",name:"title",value:t,onChange:this.handleChange,placeholder:"Enter title..."}),i.a.createElement("input",{className:N.a.input,type:"text",name:"description",value:n,onChange:this.handleChange,placeholder:"Enter description..."}),i.a.createElement("div",{className:N.a.modal_buttons},i.a.createElement("button",{className:"".concat(N.a.button," button"),type:"submit"},"Save"),i.a.createElement("button",{className:"".concat(N.a.button," button"),type:"button",onClick:a},"Cancel")))}}]),t}(a.Component);x.defaultProps={title:"",description:""};var M=x,I=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).state={isOpen:!1},n.toggle=function(){return n.setState((function(e){return{isOpen:!e.isOpen}}))},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.isOpen;return(0,this.props.children)({isOpen:e,onToggle:this.toggle})}}]),t}(a.Component),L=n(29),D=n.n(L),B=n(14),A=n.n(B),H=function(e){var t=e.date,n=e.title,a=e.description;return i.a.createElement(i.a.Fragment,null,i.a.createElement("p",{className:A.a.date},t),i.a.createElement("h3",{className:A.a.title},n),i.a.createElement("p",null,a))},V=n(15),K=n.n(V),P=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).state={oldRecipe:[]},n.showOldVersions=function(e){R(e).then((function(e){e&&n.setState({oldRecipe:e.oldVersion})}))},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.recipeId;this.showOldVersions(e)}},{key:"render",value:function(){var e=this.state.oldRecipe,t=e.map((function(e){var t=new Date(e.date).toLocaleString("en-US");return i.a.createElement("li",{key:D.a.generate(),className:K.a.version_list__item},i.a.createElement(H,{date:t,title:e.title,description:e.description}))}));return e.length>0&&i.a.createElement("ul",{className:K.a.version_list},t)}}]),t}(a.Component),U=n(8),F=n.n(U),G=function(e){var t=e.title,n=e.description,a=e.id,c=e.onRemoveRecipe,r=e.onEditRecipe,o=e.date;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:F.a.recipe_info},i.a.createElement("p",{className:F.a.date},o),i.a.createElement("h2",null,t),i.a.createElement("p",null,n)),i.a.createElement("div",{className:F.a.recipe_item__footer},i.a.createElement("div",{className:F.a.recipe_controls},i.a.createElement("button",{className:"".concat(F.a.recipe_controls__button," button"),type:"button",onClick:r},"Edit"),i.a.createElement("button",{className:"".concat(F.a.recipe_controls__button," button"),type:"button",onClick:c},"Delete")),i.a.createElement(I,null,(function(e){var t=e.isOpen,n=e.onToggle;return i.a.createElement("div",{className:F.a.recipe_show_version},i.a.createElement("button",{className:"".concat(F.a.show__button," button"),type:"button",onClick:n},t?"Hide":"Show"),t&&i.a.createElement(P,{recipeId:a}))}))))},T=n(16),J=n.n(T),q=function(e){var t=e.recipes,n=e.onRemoveRecipe,a=e.onEditRecipe,c=t.map((function(e){var t=new Date(e.date).toLocaleString("en-US");return i.a.createElement("li",{key:e._id,className:J.a.recipes_list__item},i.a.createElement(G,{title:e.title,description:e.description,id:e._id,date:t,onRemoveRecipe:function(){return n(e._id)},onEditRecipe:function(){return a(e._id)}}))}));return t.length>0&&i.a.createElement("ul",{className:J.a.recipes_list},c)},z=n(30),W=n.n(z),Z=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).state={recipes:[],isCreating:!1,isEditing:!1,selectedRecipeId:null},n.updateRecipes=function(){f().then((function(e){n.setState({recipes:e})}))},n.addRecipe=function(e){v(e).then((function(){n.updateRecipes()})).finally(n.closeCreateRecipeModal)},n.editRecipe=function(e){var t=e.title,a=e.description;E(n.state.selectedRecipeId,{title:t,description:a}).then((function(){n.updateRecipes()})).finally(n.closeEditRecipeModal)},n.removeRecipe=function(e){b(e).then((function(){n.updateRecipes()}))},n.openCreateRecipeModal=function(){n.setState({isCreating:!0})},n.closeCreateRecipeModal=function(){n.setState({isCreating:!1})},n.openEditRecipeModal=function(e){n.setState({isEditing:!0,selectedRecipeId:e})},n.closeEditRecipeModal=function(){n.setState({isEditing:!1,selectedRecipeId:null})},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.updateRecipes()}},{key:"render",value:function(){var e=this.state,t=e.recipes,n=e.isCreating,a=e.isEditing,c=e.selectedRecipeId,r=t.find((function(e){return e._id===c}));return i.a.createElement(i.a.Fragment,null,i.a.createElement("button",{type:"button",onClick:this.openCreateRecipeModal,className:"".concat(W.a.button," button")},"New recipe"),i.a.createElement(q,{recipes:t,onEditRecipe:this.openEditRecipeModal,onRemoveRecipe:this.removeRecipe}),n&&i.a.createElement(g,{onClose:this.closeCreateRecipeModal},i.a.createElement(M,{onSave:this.addRecipe,onCancel:this.closeCreateRecipeModal})),a&&i.a.createElement(g,{onClose:this.closeEditRecipeModal},i.a.createElement(M,{onSave:this.editRecipe,onCancel:this.closeEditRecipeModal,title:r.title,description:r.description})))}}]),t}(a.Component);r.a.render(i.a.createElement(Z,null),document.getElementById("root"))},8:function(e,t,n){e.exports={recipe_info:"RecipesListItem_recipe_info__2z8KK",date:"RecipesListItem_date__HeVC9",recipe_item__footer:"RecipesListItem_recipe_item__footer__1cHe7",recipe_show_version:"RecipesListItem_recipe_show_version__2HBdk",recipe_controls__button:"RecipesListItem_recipe_controls__button__1ZgUC",show__button:"RecipesListItem_show__button__1SPSH",recipe_controls:"RecipesListItem_recipe_controls__1SDT6"}}},[[31,1,2]]]);
//# sourceMappingURL=main.3ce576d4.chunk.js.map